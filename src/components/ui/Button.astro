---
import { getLangFromUrl } from '../../i18n/utils';

const lang = getLangFromUrl(Astro.url);

interface Props {
  size?: "md" | "lg";
  icon?:  "phone" | "info" | "none";
  style?: "primary" | "secondary" | "tertiary";
  color?: "light" | "dark";
  class?: string;
  link?: string;
  iconOnly?: boolean;
  [x: string]: any;
}

const {
  size = "md",
  style = "primary",
  color = "dark",
  icon = "none",
  iconOnly = false,
  class: className,
  link,
  ...rest
} = Astro.props;

const sizes = {
  md: "px-4 py-3.5 text-[16px]",
  lg: "px-4 py-3.5 text-[16px] md:p-8 md:text-[32px]",
};

const styles = {
    primary_dark:
      "bg-tertiary text-black hover:bg-orange-300 border border-transparent focus-visible:ring-tertiary ring-black ring-offset-black",
    primary_light:
      "bg-blue-500 text-white hover:bg-blue-700 border border-transparent  focus-visible:ring-orange ring-white ring-offset-white",
    secondary_dark:
      "bg-transparant text-tertiary border border-white hover:border-tertiary box-border focus-visible:ring-tertiary ring-black ring-offset-black",
    secondary_light:
      "bg-transparant text-black border-2 border-blue-900 hover:border-blue-500 box-border focus-visible:ring-orange ring-white ring-offset-white",
    tertiary_light:
      "text-dark text-sm mt-3",
    tertiary_dark:
      "text-light text-sm mt-3"
};

const iconFill = {
    primary_dark:
      "fill-black",
    primary_light:
      "fill-white",
    secondary_light:
      "fill-black",
    secondary_dark:
      "fill-tertiary",
};
---

<a
  {...rest}
  class:list={[
    "font-medium inline-flex items-center flex-row gap-2 text-center rounded-full transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-2 ring-offset-2",
    style === "tertiary" || iconOnly ? '' : sizes[size],
    (iconOnly && size == "md") && 'p-4',
    (iconOnly && size == "lg") && 'p-8',
    styles[style + "_" + color],
    className,
  ]}
  href={`/${lang+link}`}
  >
  { icon == "phone" && 
    <svg class:list={[iconFill[style + "_" + color],{ "w-8 h-8 mr-2": size == "lg" }]} width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M27.5516 29.3332C24.7419 29.3332 21.8616 28.6297 18.9107 27.2228C15.9599 25.8155 13.2184 23.8405 10.6862 21.2978C8.15421 18.7553 6.18463 16.0139 4.77741 13.0736C3.37046 10.1333 2.66699 7.25831 2.66699 4.44859C2.66699 3.93942 2.83366 3.51511 3.16699 3.17567C3.50033 2.83622 3.91699 2.6665 4.41699 2.6665H8.53866C8.99172 2.6665 9.38699 2.80914 9.72449 3.09442C10.0623 3.3797 10.291 3.74567 10.4107 4.19234L11.2374 8.1665C11.3144 8.63234 11.3005 9.03942 11.1957 9.38775C11.091 9.73609 10.9062 10.0214 10.6412 10.2436L6.98449 13.6536C7.6681 14.895 8.42394 16.0483 9.25199 17.1136C10.08 18.1789 10.9631 19.1879 11.9012 20.1407C12.8689 21.1087 13.9106 22.0089 15.0262 22.8411C16.1414 23.6733 17.3657 24.4591 18.6991 25.1986L22.2632 21.5703C22.5346 21.2775 22.8396 21.0847 23.1782 20.9919C23.5169 20.8989 23.8913 20.8801 24.3016 20.9357L27.8078 21.6536C28.2609 21.7647 28.6285 21.9929 28.9107 22.3382C29.1927 22.6832 29.3337 23.079 29.3337 23.5257V27.5832C29.3337 28.0832 29.1639 28.4998 28.8245 28.8332C28.4851 29.1665 28.0607 29.3332 27.5516 29.3332ZM6.20241 12.0894L9.40116 9.14734C9.50783 9.06178 9.57727 8.94428 9.60949 8.79484C9.64144 8.64512 9.63602 8.50623 9.59324 8.37817L8.85283 4.84609C8.81005 4.67498 8.73533 4.54678 8.62866 4.4615C8.52171 4.37595 8.38283 4.33317 8.21199 4.33317H4.79199C4.66366 4.33317 4.55685 4.37595 4.47158 4.4615C4.38602 4.54678 4.34324 4.65359 4.34324 4.78192C4.37519 5.92081 4.55366 7.10984 4.87866 8.349C5.20338 9.58845 5.64463 10.8353 6.20241 12.0894ZM20.2857 25.9807C21.4116 26.5384 22.6119 26.9508 23.8866 27.2178C25.161 27.485 26.2716 27.6282 27.2182 27.6473C27.3466 27.6473 27.4534 27.6046 27.5387 27.519C27.6242 27.4335 27.667 27.3266 27.667 27.1986V23.8523C27.667 23.6815 27.6242 23.5426 27.5387 23.4357C27.4534 23.329 27.3252 23.2543 27.1541 23.2115L24.0707 22.5798C23.9427 22.5371 23.8306 22.5318 23.7345 22.564C23.6381 22.5959 23.5366 22.6654 23.4299 22.7723L20.2857 25.9807Z" fill="#0B1215"/>
    </svg>
  }
  { icon == "info" && 
    <svg class:list={[iconFill[style + "_" + color],{ "w-8 h-8": size == "lg" }]} width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M9.00056 13.0147C9.11878 13.0147 9.21769 12.9748 9.29727 12.8949C9.37687 12.8151 9.41667 12.7161 9.41667 12.5981V8.84807C9.41667 8.73002 9.37668 8.63106 9.29671 8.5512C9.21675 8.47134 9.11766 8.43141 8.99944 8.43141C8.88121 8.43141 8.78231 8.47134 8.70273 8.5512C8.62313 8.63106 8.58333 8.73002 8.58333 8.84807V12.5981C8.58333 12.7161 8.62332 12.8151 8.70329 12.8949C8.78325 12.9748 8.88234 13.0147 9.00056 13.0147ZM9 7.24551C9.14531 7.24551 9.2671 7.19636 9.3654 7.09807C9.46367 6.99978 9.51281 6.87798 9.51281 6.73268C9.51281 6.58739 9.46367 6.46559 9.3654 6.3673C9.2671 6.26901 9.14531 6.21987 9 6.21987C8.85469 6.21987 8.7329 6.26901 8.6346 6.3673C8.53633 6.46559 8.48719 6.58739 8.48719 6.73268C8.48719 6.87798 8.53633 6.99978 8.6346 7.09807C8.7329 7.19636 8.85469 7.24551 9 7.24551ZM9.00279 16.7647C7.96567 16.7647 6.9906 16.5679 6.07758 16.1743C5.16457 15.7807 4.37037 15.2466 3.69498 14.5718C3.0196 13.8971 2.48493 13.1036 2.09096 12.1914C1.69699 11.2793 1.5 10.3046 1.5 9.26753C1.5 8.23041 1.6968 7.25534 2.0904 6.34232C2.48401 5.42931 3.01819 4.63511 3.69294 3.95972C4.36769 3.28434 5.16114 2.74967 6.07329 2.3557C6.98546 1.96173 7.9601 1.76474 8.99721 1.76474C10.0343 1.76474 11.0094 1.96154 11.9224 2.35514C12.8354 2.74875 13.6296 3.28293 14.305 3.95768C14.9804 4.63243 15.5151 5.42588 15.909 6.33803C16.303 7.2502 16.5 8.22484 16.5 9.26195C16.5 10.2991 16.3032 11.2741 15.9096 12.1872C15.516 13.1002 14.9818 13.8944 14.3071 14.5698C13.6323 15.2451 12.8389 15.7798 11.9267 16.1738C11.0145 16.5678 10.0399 16.7647 9.00279 16.7647ZM9 15.9314C10.8611 15.9314 12.4375 15.2856 13.7292 13.9939C15.0208 12.7022 15.6667 11.1259 15.6667 9.26474C15.6667 7.40363 15.0208 5.82724 13.7292 4.53557C12.4375 3.24391 10.8611 2.59807 9 2.59807C7.13889 2.59807 5.5625 3.24391 4.27083 4.53557C2.97917 5.82724 2.33333 7.40363 2.33333 9.26474C2.33333 11.1259 2.97917 12.7022 4.27083 13.9939C5.5625 15.2856 7.13889 15.9314 9 15.9314Z"/>
    </svg> 
  }
  {
   !iconOnly && <slot />
  }
  {
    style == "tertiary" && <span class="-mt-1 text-xl">
      &#8250;
    </span>
  }
</a>