---
import { Image } from 'astro:assets';
import Button from './ui/Button.astro';
import Link from './ui/Link.astro';
import FooterLink from './ui/FooterLink.astro'
import LanguageMenu from './ui/LanguageMenu.tsx';
import footerimage from "@assets/images/highlight.png"
import facebook from "@assets/icons/facebook.svg"
import youtube from "@assets/icons/youtube.svg"
import twitter from "@assets/icons/twitter.svg"
import linkedin from "@assets/icons/linkedin.svg"
import iconBlue from "@assets/logos/icon_blue.svg"
import logoWhite from "@assets/logos/Amexio_White.svg"
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

---
<footer class="relative inline-flex flex-col items-start justify-start w-full overflow-hidden isolate">
  <div class="relative flex flex-col items-start justify-start w-full bg-quaternary">
    <div class="relative max-w-[1304px] w-full mx-auto px-8 py-20 justify-start items-center gap-[90px] inline-flex ">
      <div class="inline-flex flex-col items-start justify-start w-full gap-2 sm:w-1/2 ">
        <h2 class="font-serif text-3xl text-black">
          {t('footer.headline')}
        </h2>
        <p class="text-base text-black md:text-xl text-pretty">
          {t('footer.subheadline')}
        </p>
        <Button link="/contact" class="mt-8" size="lg" icon="phone" style="secondary" color="light">{t('footer.button')}</Button>
      </div>
      <div class="absolute flex justify-center w-9/12 sm:w-7/12 md:w-5/12 overflow-hidden rounded-full top-[320px] md:top-[200px] lg:top-20 -right-24 md:right-16 aspect-square">
        <Image class="z-50 min-h-full max-w-none w-full" loading="lazy" src={footerimage} alt="A nice foto of a person in a crowd" />
      </div>
    </div>
  </div>

  <div class="relative flex flex-col items-start justify-start w-full bg-sky-900">
    <div class="relative max-w-[1304px] py-10 w-screen mx-auto px-8 gap-14 justify-start items-center inline-flex">
      <div class="absolute z-40 h-[1140px] sm:h-[736px] -bottom-20 sm:right-[-391px] md:right-[-291px] lg:right-0">
        <svg class="h-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 881 811"><defs><style>.cls-1{fill:#ed6c25;}.cls-1,.cls-2{stroke-width:0px;}.cls-2{fill:#084872;}</style></defs><path class="cls-2" d="M730.66.33c-32.16,2.38-53.65,19.43-70.8,37.39-2.65,2.94-3.78,4.29-5.51,6.55,0,0-309.38,362.32-309.38,362.32l5.5.14c1.83-2.26,306.97-359.66,308.39-361.73,5.28-6.31,10.13-11.46,19.05-18.74,11.74-9.39,30.46-20.82,52.85-21.93,0,0,141.56-.31,141.56-.31l-343.04,402.64h5.02L881,0l-150.34.33Z"/><path class="cls-1" d="M529.28,406.66c-55.31,62.04-265.05,315.55-326.19,378.08-11.74,9.39-30.46,20.82-52.85,21.93,0,0-141.56.31-141.56.31l341.79-400.24c-1.25-.06-4.22-.12-5.5-.14L0,811s150.34-.33,150.34-.33c23.55-1.16,43.04-13.05,55.24-22.81,64.11-65.88,270.05-315.68,328.71-381.2h-5.02Z"/></svg>
      </div>
      <div class="flex items-start justify-start w-full py-10 md:w-9/12 lg:w-5/12">
        <div class="inline-flex flex-col flex-wrap items-start justify-start gap-y-2 md:gap-y-8 md:flex-row">
          <FooterLink href={`/${lang}/services`}>{t('nav.services')}</FooterLink>
          <FooterLink href={`/${lang}/cases/`}>{t('nav.cases')}</FooterLink>
          <FooterLink href={`/${lang}/blog/`}>{t('nav.blog')}</FooterLink>
          <FooterLink href={`/${lang}/about/`}>{t('nav.about')}</FooterLink>
          <FooterLink href={`/${lang}/contact/`}>{t('nav.contact')}</FooterLink>
          <div class="z-50 inline-flex items-center justify-start h-12 gap-2 md:w-1/3">
            <Link href="https://www.facebook.com/Amexio/" rel="noopener">
              <Image loading="lazy" class="w-6 h-6" src={facebook} alt="facebook" />
            </Link>
            <Link href="https://twitter.com/AmexioExpertECM" rel="noopener">
              <Image loading="lazy" class="w-6 h-6" src={twitter} alt="X (Twitter)" />
            </a>
            <Link href="https://www.linkedin.com/company/amexio/mycompany/verification/" rel="noopener">
              <Image loading="lazy" class="w-6 h-6" src={linkedin} alt="LinkedIn" />
            </Link>
            <Link href="https://www.youtube.com/channel/UC3Gu3APHTiyV3ZjVihs488w" rel="noopener">
              <Image loading="lazy" class="w-6 h-6" src={youtube} alt="youtube" />
            </Link>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="relative z-50 flex flex-col items-start justify-start w-full bg-blue-900">
    <div class="max-w-[1304px] w-screen mx-auto gap-8 px-8 py-8 md:py-4 justify-between items-center inline-flex flex-col xl:flex-row">
      <p class="flex flex-col items-center gap-2 text-base font-medium text-center text-white md:text-left md:text-lg md:flex-row xl:w-1/2">
        {t('footer.copyright')} <Link href="https://www.amexio.fr/" rel="noopener">
          <Image loading="lazy" class="md:pl-2" width={114} height={24} src={logoWhite} alt="Amexio" />
        </Link>
      </p>
      <div class="relative flex flex-wrap items-center justify-center gap-8 lg:justify-end md:mt-0 xl:w-1/2">
        <Link class="text-base font-medium text-white underline" href={`/${lang}/privacy/`}>{t('footer.privacy')}</Link>
        <Link class="text-base font-medium text-white underline" href={`/${lang}/cookies/`}>{t('footer.cookies')}</Link>
        <div class="inline-flex gap-8">
          <Image loading="lazy" class="w-6 h-6" src={iconBlue} alt="" />
          <LanguageMenu currentLang={lang} />
        </div>
      </div>
    </div>
  </div>
</footer>